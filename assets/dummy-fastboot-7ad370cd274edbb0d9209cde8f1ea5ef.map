{"version":3,"sources":["app-factory.js","dummy/initializers/ajax.js","dummy/initializers/error-handler.js","dummy/instance-initializers/setup-fetch.js"],"names":["define","App","config","default","create","APP","_exports","Object","defineProperty","value","get","Ember","nodeAjax","options","protocol","this","test","url","fbError","Error","message","najax","_default","name","initialize","application","register","instantiate","inject","onerror","err","errorMessage","concat","stack","console","error","_fetch","instance","fastboot","lookup","setupFastboot"],"mappings":"AAAAA,OAAA,wBAAA,CAAA,YAAA,6BAAA,SAAAC,EAAAC,GAIA,OAHAD,EAAAA,EAAA,QACAC,EAAAA,EAAA,QAEA,CACAC,QAAA,WACA,OAAAF,EAAAG,OAAAF,EAAAG,UCNAL,OAAA,0BAAA,CAAA,YAAA,SAAAM,GACA;AAEAC,OAAAC,eAAAF,EAAA,aAAA,CACAG,OAAA,IAEAH,EAAAH,aAAA;AACA,IAAAO,EAAAC,MAAAD,IAEAE,EAAA,SAAAC,GACA,IAEAC,EAAAJ,EAAAK,KAAA;AAEA,GAHA,QAGAC,KAAAH,EAAAI,KACAJ,EAAAI,IAAAH,EAAAD,EAAAI;KACA,IANA,eAMAD,KAAAH,EAAAI,KACA,IACAJ,EAAAI,IAAAH,EAAA,KAAAJ,EAAAK,KAAA,yBAAAF,EAAAI,IACA,MAAAC,GACA,MAAA,IAAAC,MAAA,6QAAAD,EAAAE,SAIA,IAAAC,MAGA,MAAA,IAAAF,MAAA;AAFAE,MAAAR,IAMAS,EAAA,CACAC,KAAA,eACAC,WAAA,SAAAC,GACAA,EAAAC,SAAA,YAAAd,EAAA,CACAe,aAAA,IAEAF,EAAAG,OAAA,UAAA,eAAA,aACAH,EAAAG,OAAA,UAAA,WAAA;AAGAtB,EAAAH,QAAAmB,KCzCAtB,OAAA,mCAAA,CAAA,YAAA,SAAAM,GACA;AAEAC,OAAAC,eAAAF,EAAA,aAAA,CACAG,OAAA,IAEAH,EAAAH,aAAA;AAOA,IAAAmB,EAAA,CACAC,KAAA,gBACAC,WAAA,WACAb,MAAAkB,UAEAlB,MAAAkB,QAAA,SAAAC,GACA,IAAAC,EAAA,kFAAAC,OAAAF,EAAAG,OAAAH;AACAI,QAAAC,MAAAJ;AAKAzB,EAAAH,QAAAmB,KCzBAtB,OAAA,0CAAA,CAAA,UAAA,UAAA,SAAAM,EAAA8B,GACA;AAEA7B,OAAAC,eAAAF,EAAA,aAAA,CACAG,OAAA,IAEAH,EAAAH,aAAA;AAYA,IAAAmB,EAAA,CACAC,KAAA,QACAC,WAPA,SAAAa,GACA,IAAAC,EAAAD,EAAAE,OAAA,qBACA,EAAAH,EAAAI,eAAAF,EAAA5B,IAAA;AAOAJ,EAAAH,QAAAmB","file":"dummy-fastboot.js","sourcesContent":["define('~fastboot/app-factory', ['dummy/app', 'dummy/config/environment'], function(App, config) {\n  App = App['default'];\n  config = config['default'];\n\n  return {\n    'default': function() {\n      return App.create(config.APP);\n    }\n  };\n});\n","define(\"dummy/initializers/ajax\", [\"exports\"], function (_exports) {\n  \"use strict\";\n\n  Object.defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n  _exports.default = void 0;\n  var get = Ember.get;\n\n  var nodeAjax = function nodeAjax(options) {\n    var httpRegex = /^https?:\\/\\//;\n    var protocolRelativeRegex = /^\\/\\//;\n    var protocol = get(this, 'fastboot.request.protocol');\n\n    if (protocolRelativeRegex.test(options.url)) {\n      options.url = protocol + options.url;\n    } else if (!httpRegex.test(options.url)) {\n      try {\n        options.url = protocol + '//' + get(this, 'fastboot.request.host') + options.url;\n      } catch (fbError) {\n        throw new Error('You are using Ember Data with no host defined in your adapter. This will attempt to use the host of the FastBoot request, which is not configured for the current host of this request. Please set the hostWhitelist property for in your environment.js. FastBoot Error: ' + fbError.message);\n      }\n    }\n\n    if (najax) {\n      najax(options);\n    } else {\n      throw new Error('najax does not seem to be defined in your app. Did you override it via `addOrOverrideSandboxGlobals` in the fastboot server?');\n    }\n  };\n\n  var _default = {\n    name: 'ajax-service',\n    initialize: function initialize(application) {\n      application.register('ajax:node', nodeAjax, {\n        instantiate: false\n      });\n      application.inject('adapter', '_ajaxRequest', 'ajax:node');\n      application.inject('adapter', 'fastboot', 'service:fastboot');\n    }\n  };\n  _exports.default = _default;\n});","define(\"dummy/initializers/error-handler\", [\"exports\"], function (_exports) {\n  \"use strict\";\n\n  Object.defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n  _exports.default = void 0;\n\n  /**\n   * Initializer to attach an `onError` hook to your app running in fastboot. It catches any run loop\n   * exceptions and other errors and prevents the node process from crashing.\n   *\n   */\n  var _default = {\n    name: 'error-handler',\n    initialize: function initialize() {\n      if (!Ember.onerror) {\n        // if no onerror handler is defined, define one for fastboot environments\n        Ember.onerror = function (err) {\n          var errorMessage = \"There was an error running your app in fastboot. More info about the error: \\n \".concat(err.stack || err);\n          console.error(errorMessage);\n        };\n      }\n    }\n  };\n  _exports.default = _default;\n});","define(\"dummy/instance-initializers/setup-fetch\", [\"exports\", \"fetch\"], function (_exports, _fetch) {\n  \"use strict\";\n\n  Object.defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n  _exports.default = void 0;\n\n  /**\n   * To allow relative URLs for Fastboot mode, we need the per request information\n   * from the fastboot service. Then we save the request from fastboot info.\n   * On each fetch with relative url we get host and protocol from it.\n   */\n  function patchFetchForRelativeURLs(instance) {\n    var fastboot = instance.lookup('service:fastboot');\n    (0, _fetch.setupFastboot)(fastboot.get('request'));\n  }\n\n  var _default = {\n    name: 'fetch',\n    initialize: patchFetchForRelativeURLs\n  };\n  _exports.default = _default;\n});"]}